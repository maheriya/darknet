#!/bin/csh -f
./clean

## Hack for compiling on Jetson TX1 with new opencv (after JetPack 3.0)
set archi=`uname -i`
if ( x"$archi" == x"aarch64" ) then
  set extraopts = ( -DCUDA_USE_STATIC_CUDA_RUNTIME=OFF )
else
  set extraopts = ( )
endif

set cmd = ( cmake -DCMAKE_BUILD_TYPE=RELEASE -DCMAKE_INSTALL_PREFIX=/usr/local/darknet "$extraopts" .. )
echo $cmd
$cmd
if ( $status != 0 ) then
  echo "Error while running cmake!"
  exit(1)
endif
#make -j4
